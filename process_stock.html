<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Stock Ticker Search</title>
    </head>
    <body>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const searchForm = document.getElementById('searchForm');
                const searchResultsDiv = document.getElementById('searchResults');

                searchForm.addEventListener('submit', async function (event) {
                    event.preventDefault();

                    const searchTerm = document.getElementById('searchTerm').value;
                    const searchType = document.getElementById('searchType').value;

                    try {
                        const response = await fetch(`/process?searchTerm=${searchTerm}&searchType=${searchType}`);
                        const data = await response.json();

                        displayResults(data);
                    } catch (error) {
                        console.error('Error processing request:', error);
                        searchResultsDiv.innerHTML = 'Internal Server Error';
                    }
                });

                function displayResults(results) {
                    let html = '<h2>Results:</h2>';
                    if (results.length === 0) {
                        html += '<p>No results found.</p>';
                    } else {
                        html += '<ul>';
                        results.forEach(result => {
                            html += `<li>${result.company} (${result.ticker})</li>`;
                        });
                        html += '</ul>';
                    }
                    searchResultsDiv.innerHTML = html;
                }
            });
        </script>
    </body>
</html>